<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Geye Pro: Real Working System</title>
    <style>
        :root {
            --primary: #007AFF;
            --primary-glow: rgba(0, 122, 255, 0.4);
            --secondary: #5856D6;
            --accent: #FF2D55;
            --success: #34C759;
            --warning: #FF9500;
            --glass: rgba(255, 255, 255, 0.08);
            --glass-dark: rgba(0, 0, 0, 0.4);
            --blur: blur(30px);
            --font-sf: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
            color: #fff;
            font-family: var(--font-sf);
            user-select: none;
            height: 100vh;
            width: 100vw;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* BOOT SCREEN */
        #boot-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            z-index: 10000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .boot-animation {
            position: relative;
            width: 120px;
            height: 120px;
            margin-bottom: 40px;
        }
        
        .boot-logo {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0;
            animation: logoReveal 2s ease-out 0.5s forwards;
        }
        
        .boot-ring {
            position: absolute;
            inset: 0;
            border: 3px solid transparent;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 2s linear infinite;
            opacity: 0;
            animation: ringReveal 1s ease-out 0.2s forwards;
        }
        
        .boot-subtitle {
            color: rgba(255, 255, 255, 0.6);
            font-size: 18px;
            font-weight: 300;
            letter-spacing: 3px;
            margin-bottom: 60px;
            text-align: center;
            opacity: 0;
            animation: subtitleReveal 1.5s ease-out 1s forwards;
        }
        
        .boot-progress {
            width: 200px;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 1px;
            overflow: hidden;
            position: relative;
        }
        
        .boot-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 1px;
        }
        
        .boot-status {
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
            font-weight: 400;
            margin-top: 20px;
            text-align: center;
            letter-spacing: 1px;
        }
        
        .activate-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            color: white;
            padding: 16px 48px;
            font-weight: 600;
            font-size: 17px;
            cursor: pointer;
            border-radius: 30px;
            margin-top: 40px;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 8px 32px rgba(0, 122, 255, 0.3);
            letter-spacing: 1px;
            opacity: 0;
            animation: buttonReveal 1s ease-out 2s forwards;
        }
        
        @keyframes logoReveal {
            to { opacity: 1; transform: scale(1); }
        }
        
        @keyframes ringReveal {
            to { opacity: 1; }
        }
        
        @keyframes subtitleReveal {
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes buttonReveal {
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* MAIN CAMERA VIEW */
        #camera-view {
            position: fixed;
            inset: 0;
            background: #000;
            display: none;
        }
        
        #camera-feed {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        #overlay-canvas {
            position: absolute;
            inset: 0;
            pointer-events: none;
        }

        /* CONTROLS */
        #toggle-ui {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 52px;
            height: 52px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: var(--blur);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.4s ease;
            display: none;
        }
        
        #fullscreen-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
            display: none;
        }
        
        .screen-btn {
            width: 44px;
            height: 44px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: var(--blur);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 22px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        #media-controls {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 16px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: var(--blur);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 30px;
            padding: 16px;
            display: none;
        }
        
        .media-btn {
            width: 60px;
            height: 60px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .media-btn.recording {
            background: var(--accent);
            animation: pulse 1.5s infinite;
        }
        
        .media-btn.capturing {
            background: var(--success);
            transform: scale(0.9);
        }

        #zoom-controls {
            position: fixed;
            bottom: 120px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
            display: none;
        }
        
        .zoom-btn {
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: var(--blur);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .zoom-btn.active {
            background: var(--primary);
            transform: scale(1.1);
        }
        
        #filter-controls {
            position: fixed;
            bottom: 120px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
            display: none;
        }
        
        .filter-btn {
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: var(--blur);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .filter-btn.active {
            background: var(--secondary);
            transform: scale(1.1);
        }

        /* MAIN UI */
        #main-ui {
            position: fixed;
            top: 90px;
            right: 20px;
            width: 360px;
            max-height: calc(100vh - 110px);
            opacity: 0;
            transform: translateX(120px);
            transition: all 0.4s ease;
            pointer-events: none;
            z-index: 999;
            overflow-y: auto;
            display: none;
        }
        
        #main-ui.active {
            opacity: 1;
            transform: translateX(0);
            pointer-events: all;
        }
        
        .glass-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: var(--blur);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 12px;
        }
        
        .tab-navigation {
            display: flex;
            gap: 4px;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 12px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 10px 16px;
            background: transparent;
            border: none;
            color: rgba(255,255,255,0.6);
            font-size: 12px;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 70px;
        }

        .tab-btn.active {
            background: var(--primary);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .status-label {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
        }
        
        .status-value {
            font-size: 14px;
            font-weight: 600;
            color: white;
        }
        
        .metric-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 12px;
        }
        
        .metric-card {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 18px;
            padding: 18px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .metric-value {
            font-size: 26px;
            font-weight: 700;
            color: white;
            line-height: 1;
            margin-bottom: 6px;
        }
        
        .metric-label {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            font-weight: 500;
        }

        /* FILTER EFFECTS */
        .filter-thermal {
            filter: hue-rotate(180deg) saturate(2) contrast(1.5) brightness(0.8);
        }
        
        .filter-night {
            filter: brightness(0.6) contrast(1.4) grayscale(0.3);
        }
        
        .filter-enhanced {
            filter: contrast(1.3) saturate(1.4) brightness(1.1);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* ALERT */
        #alert-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: var(--blur);
            border: 1px solid var(--accent);
            border-radius: 20px;
            padding: 16px 32px;
            color: white;
            font-weight: 600;
            font-size: 14px;
            display: none;
            z-index: 1000;
            text-align: center;
            max-width: 80%;
        }
    </style>
</head>
<body>
    <!-- BOOT SCREEN -->
    <div id="boot-screen">
        <div class="boot-animation">
            <div class="boot-ring"></div>
            <div class="boot-logo">G</div>
        </div>
        <div class="boot-subtitle">VISION SYSTEM</div>
        <div class="boot-progress">
            <div class="boot-progress-bar" id="boot-progress"></div>
        </div>
        <div class="boot-status" id="boot-status">Initializing System</div>
        <button class="activate-btn" id="btn-activate" style="display:none;">START CAMERA</button>
    </div>

    <!-- CAMERA VIEW -->
    <div id="camera-view">
        <video id="camera-feed" autoplay playsinline muted></video>
        <canvas id="overlay-canvas"></canvas>
    </div>
    
    <!-- CONTROLS -->
    <div id="fullscreen-controls">
        <button class="screen-btn" id="btn-fullscreen" title="Fullscreen">‚õ∂</button>
        <button class="screen-btn" id="btn-lock" title="Lock Orientation">üîí</button>
    </div>
    
    <div id="toggle-ui">‚öôÔ∏è</div>
    
    <div id="media-controls">
        <button class="media-btn" id="btn-capture" title="Capture Photo">üì∏</button>
        <button class="media-btn" id="btn-record" title="Record Video">üé•</button>
    </div>
    
    <div id="zoom-controls">
        <div class="zoom-btn active" data-zoom="1">1x</div>
        <div class="zoom-btn" data-zoom="1.5">1.5x</div>
        <div class="zoom-btn" data-zoom="2">2x</div>
    </div>
    
    <div id="filter-controls">
        <button class="filter-btn active" data-filter="normal" title="Normal">üëÅÔ∏è</button>
        <button class="filter-btn" data-filter="night" title="Night">üåô</button>
        <button class="filter-btn" data-filter="enhanced" title="Enhanced">‚ú®</button>
    </div>
    
    <!-- MAIN UI -->
    <div id="main-ui">
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="camera">Camera</button>
            <button class="tab-btn" data-tab="settings">Settings</button>
        </div>

        <div class="tab-content active" id="camera-tab">
            <div class="glass-panel">
                <div style="margin-bottom: 20px;">
                    <div style="font-size: 20px; font-weight: 700; margin-bottom: 6px;">Camera Pro</div>
                    <div style="font-size: 13px; color: rgba(255,255,255,0.6);">Professional Camera System</div>
                </div>
                
                <div class="status-item">
                    <span class="status-label">CAMERA STATUS</span>
                    <span class="status-value" id="camera-status">READY</span>
                </div>
                <div class="status-item">
                    <span class="status-label">RESOLUTION</span>
                    <span class="status-value" id="resolution-value">HD</span>
                </div>
                <div class="status-item">
                    <span class="status-label">STORAGE</span>
                    <span class="status-value" id="storage-value">125 MB</span>
                </div>
            </div>

            <div class="glass-panel">
                <div class="status-label" style="margin-bottom: 12px;">CAPTURE INFO</div>
                <div class="metric-grid">
                    <div class="metric-card">
                        <div class="metric-value" id="photos-count">0</div>
                        <div class="metric-label">PHOTOS</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="videos-count">0</div>
                        <div class="metric-label">VIDEOS</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="session-time">0:00</div>
                        <div class="metric-label">SESSION</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="battery-level">100%</div>
                        <div class="metric-label">BATTERY</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="settings-tab">
            <div class="glass-panel">
                <div style="margin-bottom: 20px;">
                    <div style="font-size: 18px; font-weight: 700; margin-bottom: 6px;">Camera Settings</div>
                </div>
                
                <div class="status-item">
                    <span class="status-label">QUALITY</span>
                    <span class="status-value">HIGH</span>
                </div>
                <div class="status-item">
                    <span class="status-label">GRID LINES</span>
                    <span class="status-value">ON</span>
                </div>
                <div class="status-item">
                    <span class="status-label">TIMER</span>
                    <span class="status-value">OFF</span>
                </div>
            </div>
        </div>
    </div>
    
    <div id="alert-notification"></div>

    <script>
    class RealCameraSystem {
        constructor() {
            this.video = document.getElementById('camera-feed');
            this.overlayCanvas = document.getElementById('overlay-canvas');
            this.overlayCtx = this.overlayCanvas.getContext('2d');
            
            this.isActive = false;
            this.isUIVisible = false;
            this.zoomLevel = 1;
            this.currentFilter = 'normal';
            this.isRecording = false;
            this.mediaRecorder = null;
            this.recordedChunks = [];
            this.mediaStream = null;
            
            this.analytics = {
                photosTaken: 0,
                videosRecorded: 0,
                sessionStartTime: null,
                batteryLevel: 100
            };
            
            this.initializeSystem();
        }

        async initializeSystem() {
            this.updateBootProgress(10, "Checking System...");
            await this.delay(800);
            
            this.updateBootProgress(40, "Loading Camera...");
            await this.delay(600);
            
            this.updateBootProgress(70, "Initializing UI...");
            await this.delay(400);
            
            this.setupEventListeners();
            this.initializeCanvas();
            
            this.updateBootProgress(100, "Ready to Start");
            await this.delay(500);
            document.getElementById('btn-activate').style.display = 'block';
        }

        updateBootProgress(percent, message) {
            document.getElementById('boot-progress').style.width = percent + '%';
            document.getElementById('boot-status').textContent = message;
        }

        delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        setupEventListeners() {
            // System Controls
            document.getElementById('btn-activate').addEventListener('click', () => this.activateCamera());
            
            // UI Controls
            document.getElementById('toggle-ui').addEventListener('click', () => this.toggleUI());
            document.getElementById('btn-fullscreen').addEventListener('click', () => this.toggleFullscreen());
            document.getElementById('btn-lock').addEventListener('click', () => this.toggleOrientationLock());
            
            // Media Controls
            document.getElementById('btn-capture').addEventListener('click', () => this.capturePhoto());
            document.getElementById('btn-record').addEventListener('click', () => this.toggleVideoRecording());
            
            // Zoom Controls
            document.querySelectorAll('.zoom-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const zoomLevel = parseFloat(e.target.dataset.zoom);
                    this.setZoom(zoomLevel);
                });
            });
            
            // Filter Controls
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const filter = e.target.dataset.filter;
                    this.setFilter(filter);
                });
            });
            
            // Tab Navigation
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    this.switchTab(e.target.dataset.tab);
                });
            });

            // Keyboard Shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.key === ' ') this.capturePhoto();
                if (e.key === 'r' || e.key === 'R') this.toggleVideoRecording();
                if (e.key === 'Escape') this.toggleUI();
                if (e.key === 'f' || e.key === 'F') this.toggleFullscreen();
            });

            // Handle orientation changes
            window.addEventListener('orientationchange', () => this.handleOrientationChange());
            
            // Handle fullscreen changes
            document.addEventListener('fullscreenchange', () => {
                this.isFullscreen = !!document.fullscreenElement;
            });

            // Simulate battery drain
            setInterval(() => {
                if (this.analytics.batteryLevel > 5) {
                    this.analytics.batteryLevel -= 0.1;
                    document.getElementById('battery-level').textContent = 
                        Math.round(this.analytics.batteryLevel) + '%';
                }
            }, 60000);
        }

        async activateCamera() {
            try {
                this.mediaStream = await navigator.mediaDevices.getUserMedia({ 
                    video: { 
                        facingMode: 'environment',
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    },
                    audio: true
                });
                
                this.video.srcObject = this.mediaStream;
                
                await new Promise((resolve, reject) => {
                    this.video.onloadedmetadata = () => {
                        this.video.play().then(resolve).catch(reject);
                    };
                });

                // Initialize media recorder
                this.mediaRecorder = new MediaRecorder(this.mediaStream);
                this.setupMediaRecorder();

                // Show all UI elements
                document.getElementById('boot-screen').style.display = 'none';
                document.getElementById('camera-view').style.display = 'block';
                document.getElementById('toggle-ui').style.display = 'flex';
                document.getElementById('fullscreen-controls').style.display = 'flex';
                document.getElementById('media-controls').style.display = 'flex';
                document.getElementById('zoom-controls').style.display = 'flex';
                document.getElementById('filter-controls').style.display = 'flex';
                document.getElementById('main-ui').style.display = 'block';
                
                this.isActive = true;
                this.analytics.sessionStartTime = new Date();
                
                this.startSessionTimer();
                this.showAlert("Camera System Activated");
                
            } catch (error) {
                this.showAlert("Camera access required", true);
                console.error("Camera error:", error);
            }
        }

        setupMediaRecorder() {
            this.mediaRecorder.ondataavailable = (event) => {
                if (event.data.size > 0) {
                    this.recordedChunks.push(event.data);
                }
            };

            this.mediaRecorder.onstop = () => {
                const videoBlob = new Blob(this.recordedChunks, { type: 'video/mp4' });
                this.saveRecording(videoBlob);
                this.recordedChunks = [];
            };
        }

        toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(() => {
                    this.showAlert("Fullscreen not supported", true);
                });
            } else {
                document.exitFullscreen();
            }
        }

        toggleOrientationLock() {
            if (screen.orientation && screen.orientation.lock) {
                if (!this.isOrientationLocked) {
                    screen.orientation.lock('landscape').then(() => {
                        this.isOrientationLocked = true;
                        document.getElementById('btn-lock').classList.add('active');
                        this.showAlert("Orientation Locked");
                    }).catch(() => {
                        this.showAlert("Orientation lock not supported", true);
                    });
                } else {
                    screen.orientation.unlock();
                    this.isOrientationLocked = false;
                    document.getElementById('btn-lock').classList.remove('active');
                    this.showAlert("Orientation Unlocked");
                }
            } else {
                this.showAlert("Screen orientation API not available", true);
            }
        }

        setZoom(level) {
            this.zoomLevel = level;
            this.video.style.transform = `scale(${level})`;
            this.video.style.transformOrigin = 'center center';
            
            document.querySelectorAll('.zoom-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            this.showAlert(`Zoom: ${level}x`);
        }

        setFilter(filter) {
            this.currentFilter = filter;
            this.video.className = `filter-${filter}`;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            this.showAlert(`Filter: ${filter.charAt(0).toUpperCase() + filter.slice(1)}`);
        }

        capturePhoto() {
            const btn = document.getElementById('btn-capture');
            btn.classList.add('capturing');
            
            setTimeout(() => {
                const canvas = document.createElement('canvas');
                canvas.width = this.video.videoWidth;
                canvas.height = this.video.videoHeight;
                const ctx = canvas.getContext('2d');

                // Apply current filter
                ctx.filter = this.getFilterStyle(this.currentFilter);
                ctx.drawImage(this.video, 0, 0);

                // Create download
                const link = document.createElement('a');
                link.download = `photo_${Date.now()}.png`;
                link.href = canvas.toDataURL('image/png', 0.95);
                link.click();

                // Update analytics
                this.analytics.photosTaken++;
                document.getElementById('photos-count').textContent = this.analytics.photosTaken;
                this.updateStorage();
                this.showAlert("Photo Saved");

                btn.classList.remove('capturing');
            }, 300);
        }

        getFilterStyle(filter) {
            const styles = {
                normal: 'none',
                night: 'brightness(0.6) contrast(1.4) grayscale(0.3)',
                enhanced: 'contrast(1.3) saturate(1.4) brightness(1.1)'
            };
            return styles[filter] || 'none';
        }

        toggleVideoRecording() {
            if (!this.mediaRecorder) {
                this.showAlert("Recording not available", true);
                return;
            }

            const btn = document.getElementById('btn-record');
            
            if (this.isRecording) {
                this.mediaRecorder.stop();
                this.isRecording = false;
                btn.classList.remove('recording');
                this.showAlert("Recording Saved");
            } else {
                this.recordedChunks = [];
                this.mediaRecorder.start();
                this.isRecording = true;
                btn.classList.add('recording');
                this.showAlert("Recording Started");
            }
        }

        saveRecording(blob) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.style.display = 'none';
            a.href = url;
            a.download = `video_${Date.now()}.mp4`;
            document.body.appendChild(a);
            a.click();
            setTimeout(() => {
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            }, 100);
            
            this.analytics.videosRecorded++;
            document.getElementById('videos-count').textContent = this.analytics.videosRecorded;
            this.updateStorage();
        }

        updateStorage() {
            const totalSize = (this.analytics.photosTaken * 2) + (this.analytics.videosRecorded * 50);
            const remaining = Math.max(0, 500 - totalSize);
            document.getElementById('storage-value').textContent = remaining + ' MB';
        }

        startSessionTimer() {
            setInterval(() => {
                if (this.analytics.sessionStartTime) {
                    const now = new Date();
                    const diff = Math.floor((now - this.analytics.sessionStartTime) / 1000);
                    const minutes = Math.floor(diff / 60);
                    const seconds = diff % 60;
                    document.getElementById('session-time').textContent = 
                        `${minutes}:${seconds.toString().padStart(2, '0')}`;
                }
            }, 1000);
        }

        switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        toggleUI() {
            const mainUI = document.getElementById('main-ui');
            const toggleBtn = document.getElementById('toggle-ui');
            
            this.isUIVisible = !this.isUIVisible;
            mainUI.classList.toggle('active', this.isUIVisible);
            toggleBtn.textContent = this.isUIVisible ? '‚úï' : '‚öôÔ∏è';
        }

        handleOrientationChange() {
            this.initializeCanvas();
        }

        initializeCanvas() {
            this.overlayCanvas.width = window.innerWidth;
            this.overlayCanvas.height = window.innerHeight;
        }

        showAlert(message, isError = false) {
            const alert = document.getElementById('alert-notification');
            alert.textContent = message;
            alert.style.borderColor = isError ? '#FF2D55' : '#007AFF';
            alert.style.display = 'block';
            
            setTimeout(() => {
                alert.style.display = 'none';
            }, 3000);
        }
    }

    // Initialize the real system
    const REAL_SYSTEM = new RealCameraSystem();

    // Error handling
    window.addEventListener('error', (event) => {
        console.error('Error:', event.error);
    });

    </script>
</body>
</html>
